# Обновление макетов на ходу

Макеты можно изменять, адаптировать и генерировать программно.

В следующих разделах объясняется, как выбирать части макета и обновлять их. Мы будем использовать этот API из экземпляра **FormHelper**, а не самого макета. Основное поведение этого API состоит в выборе части макета для управления и цепочке методов, которые после этого изменяют его.

## Выделение объектов макета срезами

Вы можете получить фрагмент макета, используя знакомый оператор `[]` Python:

```python
form.helper[1:3]
form.helper[2]
form.helper[:-1]
```

В основном вы можете делать все виды срезов, те же самые, которые поддерживаются списками Python. Вы также можете объединить их. Если бы у вас был такой макет:

```python
Layout(
    Div('email')
)
```

Вы можете получить доступ к строке `'email'`, выполнив:

```python
form.helper[0][0]
```

## wrap

Одно полезное действие, которое вы можете применить к фрагменту, — это **wrap**, которое оборачивает каждое выбранное поле с использованием типа объекта макета и переданных параметров. Давайте посмотрим пример. Если бы у нас была такая раскладка:

```python
Layout(
    'field_1',
    'field_2',
    'field_3'
)
```

Мы могли бы сделать:

```python
form.helper[1:3].wrap(Field, css_class="hello")
```

Обратите внимание, как **wrap** влияет _**на каждый выбранный**_ объект макета. Если вы хотите _**объединить**_ поля field\_2 и field\_3 в объекте макета поля, вам придется использовать **wrap\_together**.

Помните, что срез `[1:3]` работает только на первом уровне глубины макета. Итак, если предыдущий макет был таким:

```python
Layout(
    'field_1',
    Div('field_2'),
    'field_3'
)
```

`helper[1:3]` вернет этот макет:

```python
Layout(
    'field_1',
    Field(Div('field_2'), css_class="hello"),
    Field('field_3', css_class="hello")
)
```

Параметры, переданные в **wrap** или **wrap\_together**, будут использоваться для создания объекта макета, который оборачивает выбранные поля. Вы можете передавать **args** и **kwargs**. Если вы используете объект макета, такой как **Fieldset**, которому требуется строка в качестве обязательного первого аргумента, wrap не будет работать должным образом, если вы не предоставите текст легенды в качестве аргумента для **wrap**. Давайте посмотрим на действительный пример:

```python
form.helper[1:3].wrap(Fieldset, "legend of the fieldset")
```

Также вы можете передавать **args** и **kwargs**:

```python
form.helper[1:3].wrap(Fieldset, "legend of the fieldset", css_class="fieldsets")
```

## wrap\_together

**wrap\_together** оборачивает весь фрагмент в тип объекта макета с переданными параметрами. Давайте посмотрим пример. Если бы у нас была такая раскладка:

```python
Layout(
    'field_1',
    'field_2',
    'field_3'
)
```

Мы могли бы сделать:

```python
form.helper[0:3].wrap_together(Field, css_class="hello")
```

В итоге у нас получился бы такой макет:

```python
Layout(
    Field(
        'field_1',
        'field_2',
        'field_3',
        css_class='hello'
    )
)
```

## update\_attributes

## all

## Выбор имени поля

## filter

## filter\_by\_widget

## exclude\_by\_widget

## Управление макетом
